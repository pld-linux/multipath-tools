--- multipath-tools-0.4.8/kpartx/kpartx.rules~	2007-08-03 00:05:37.000000000 +0300
+++ multipath-tools-0.4.8/kpartx/kpartx.rules	2007-10-26 01:16:10.000000000 +0300
@@ -7,6 +7,9 @@
 KERNEL!="dm-*", GOTO="kpartx_end"
 ACTION=="remove", GOTO="kpartx_end"
 
+IMPORT{program}="/sbin/dmsetup export -j%M -m%m"
+ENV{DM_NAME}!="?*", GOTO="kpartx_end"
+
 ENV{DM_TABLE_STATE}!="LIVE", GOTO="kpartx_end"
 
 ENV{DM_UUID}=="?*", IMPORT{program}=="/lib/udev/kpartx_id %M %m $env{DM_UUID}"
@@ -27,9 +30,9 @@
 
 # Create dm tables for partitions
 ENV{DM_STATE}=="ACTIVE", ENV{DM_UUID}=="mpath-*", \
-        RUN+="/sbin/kpartx -a -p -part /dev/$name"
+        RUN+="/sbin/kpartx -a /dev/$name"
 ENV{DM_STATE}=="ACTIVE", ENV{DM_UUID}=="dmraid-*", \
-        RUN+="/sbin/kpartx -a -p -part /dev/$name"
+        RUN+="/sbin/kpartx -a /dev/$name"
 
 LABEL="kpartx_end"
 
